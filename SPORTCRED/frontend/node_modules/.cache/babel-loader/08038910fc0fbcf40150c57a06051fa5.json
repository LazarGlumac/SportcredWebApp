{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KiNg\\\\Desktop\\\\SPORTCRED\\\\LAST MERGE\\\\project-todo-team-name\\\\SPORTCRED\\\\frontend\\\\src\\\\EditProfile.js\";\nimport React, { useEffect, useState } from \"react\";\nimport \"./EditProfile.css\";\n\nconst EditProfile = () => {\n  const [bio, setBio] = useState(\"\");\n  const [finalBio, setFinalBio] = useState(\"\");\n  const [favSport, setFavSport] = useState(\"\");\n  const [sportLevel, setSportLevel] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [favSportTeam, setFavSportTeam] = useState(\"\");\n  const [learnSport, setLearnSport] = useState(\"\");\n  const [currentPassword, setCurrentPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  useEffect(() => {\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", \"http://localhost:8080/api/v1/getUserInfo\");\n    xhr.responseType = \"json\";\n\n    xhr.onload = () => {\n      if (xhr.status < 400) {\n        console.log(xhr.response);\n        setFavSport(xhr.response.Q1);\n        setSportLevel(xhr.response.Q2);\n        setAge(xhr.response.Q3);\n        setFavSportTeam(xhr.response.Q4);\n        setLearnSport(xhr.response.Q5);\n        setFinalBio(xhr.response.biography);\n      } else {\n        alert(\"400 Error Status\");\n      }\n    };\n\n    xhr.onerror = () => {\n      alert(\"Can't connect to server! Something went wrong!\");\n    };\n\n    xhr.send(JSON.stringify({\n      username: btoa(sessionStorage.getItem(\"username\"))\n    }));\n  }, []);\n\n  function handlePassword(event) {\n    event.preventDefault(); // check that all fields were filled\n\n    var fill = currentPassword !== \"\" && newPassword !== \"\" && confirmPassword !== \"\"; // check password validity\n\n    var valid = newPassword === confirmPassword && newPassword !== currentPassword;\n\n    if (fill) {\n      if (valid) {\n        var xhr = new XMLHttpRequest();\n        xhr.addEventListener('load', () => {\n          if (xhr.responseText.length > 0) {\n            alert('Current password is invalid');\n          } else {\n            alert('Password changed');\n          }\n        });\n        xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\n        xhr.send(JSON.stringify({\n          username: btoa(sessionStorage.getItem('username')),\n          password: btoa(newPassword),\n          oldPassword: btoa(currentPassword)\n        }));\n      } else {\n        alert('Check that:\\n1. Your current password does not match your new password\\n2. Both fields for your new password match');\n      }\n    } else {\n      alert('Please fill out all the fields.');\n    }\n  }\n\n  const updateBio = () => {\n    // instance.post(\"/updateUserProfile\", { biography: bio });\n    // setBio(\"\");\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\n    xhr.send(JSON.stringify({\n      username: btoa(sessionStorage.getItem(\"username\")),\n      biography: bio\n    }));\n    setFinalBio(bio);\n    setBio(\"\");\n  };\n\n  function setProfilePicture(path) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\n    xhr.send(JSON.stringify({\n      username: btoa(sessionStorage.getItem('username')),\n      picture: path\n    }));\n  }\n\n  const submitAnswers = e => {\n    e.preventDefault();\n\n    if (favSport && sportLevel && age && favSportTeam && learnSport) {\n      if (isNaN(age)) {\n        alert(\"Age has to be valid number!\");\n        return;\n      }\n\n      const data = {\n        username: btoa(sessionStorage.getItem(\"username\")),\n        Q1: favSport,\n        Q2: sportLevel,\n        Q3: age,\n        Q4: favSportTeam,\n        Q5: learnSport\n      };\n      let xhr = new XMLHttpRequest();\n      xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\n      xhr.send(JSON.stringify(data));\n      alert(\"Answers updated\");\n    } else {\n      alert(\"Please finish the whole survey again!\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"centContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, \"MY SPORTCRED ACCOUNT\"), finalBio && /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 20\n    }\n  }, \"My Biography\"), finalBio && /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"user-bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 20\n    }\n  }, finalBio), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, \"Update Biography\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \" Enter something about you...\",\n    name: \"bio\",\n    id: \"bio\",\n    value: bio,\n    onChange: e => setBio(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button1\",\n    onClick: updateBio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, \"Update\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, \"update profile picture\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button1\",\n    onClick: () => setProfilePicture(\"./lebron.jpg\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: require('./lebron.jpg'),\n    className: \"avatarPic\",\n    alt: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button1\",\n    onClick: () => setProfilePicture(\"./michaeljordan.jpg\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: require('./michaeljordan.jpg'),\n    className: \"avatarPic\",\n    alt: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button1\",\n    onClick: () => setProfilePicture(\"./kobe.jpg\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: require('./kobe.jpg'),\n    className: \"avatarPic\",\n    alt: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, \"update questionnaire answers\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitAnswers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"favSport\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, \"Favourite sport?\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"survey-input\",\n    type: \"text\",\n    name: \"favSport\",\n    placeholder: \"Enter sport\",\n    value: favSport,\n    onChange: e => {\n      setFavSport(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"sportLevel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, \"Highest level of sport played?\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"survey-input\",\n    type: \"text\",\n    name: \"sportLevel\",\n    placeholder: \"Enter highest level of sport played\",\n    value: sportLevel,\n    onChange: e => {\n      setSportLevel(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"age\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, \"Age?\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"survey-input\",\n    type: \"text\",\n    name: \"age\",\n    placeholder: \"Enter age\",\n    value: age,\n    onChange: e => {\n      setAge(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"favSportTeam\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, \"Team you are rooting for?\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"survey-input\",\n    type: \"text\",\n    name: \"favSportTeam\",\n    placeholder: \"Enter favourite sport\",\n    value: favSportTeam,\n    onChange: e => {\n      setFavSportTeam(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"learnSport\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, \"Sport you want to learn?\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"survey-input\",\n    type: \"text\",\n    name: \"learnSport\",\n    placeholder: \"Enter sport you want to learn about\",\n    value: learnSport,\n    onChange: e => {\n      setLearnSport(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"button1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, \"Update\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }\n  }, \"Update password\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"oldPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"oldPassword\",\n    placeholder: \"Enter current password\",\n    onChange: event => setCurrentPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"newPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"newPassword\",\n    placeholder: \"Enter new password\",\n    onChange: event => setNewPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"confirmedPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"confirmedPassword\",\n    placeholder: \"Confirm new password\",\n    onChange: event => setConfirmPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"button1\",\n    onClick: event => handlePassword(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, \"Update\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"logOutBtn\",\n    className: \"button1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, \"LOG OUT\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default EditProfile;","map":{"version":3,"sources":["C:/Users/KiNg/Desktop/SPORTCRED/LAST MERGE/project-todo-team-name/SPORTCRED/frontend/src/EditProfile.js"],"names":["React","useEffect","useState","EditProfile","bio","setBio","finalBio","setFinalBio","favSport","setFavSport","sportLevel","setSportLevel","age","setAge","favSportTeam","setFavSportTeam","learnSport","setLearnSport","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","xhr","XMLHttpRequest","open","responseType","onload","status","console","log","response","Q1","Q2","Q3","Q4","Q5","biography","alert","onerror","send","JSON","stringify","username","btoa","sessionStorage","getItem","handlePassword","event","preventDefault","fill","valid","addEventListener","responseText","length","password","oldPassword","updateBio","setProfilePicture","path","picture","submitAnswers","e","isNaN","data","target","value","require"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,mBAAP;;AAEA,MAAMC,WAAW,GAAG,MAAM;AACxB,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBH,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAACI,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACM,QAAD,EAAWC,WAAX,IAA0BP,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACU,GAAD,EAAMC,MAAN,IAAgBX,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAACY,YAAD,EAAeC,eAAf,IAAkCb,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACc,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACgB,eAAD,EAAkBC,kBAAlB,IAAwCjB,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACkB,WAAD,EAAcC,cAAd,IAAgCnB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACoB,eAAD,EAAkBC,kBAAlB,IAAwCrB,QAAQ,CAAC,EAAD,CAAtD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMuB,GAAG,GAAG,IAAIC,cAAJ,EAAZ;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiB,0CAAjB;AACAF,IAAAA,GAAG,CAACG,YAAJ,GAAmB,MAAnB;;AACAH,IAAAA,GAAG,CAACI,MAAJ,GAAa,MAAM;AACjB,UAAIJ,GAAG,CAACK,MAAJ,GAAa,GAAjB,EAAsB;AACpBC,QAAAA,OAAO,CAACC,GAAR,CAAYP,GAAG,CAACQ,QAAhB;AACAvB,QAAAA,WAAW,CAACe,GAAG,CAACQ,QAAJ,CAAaC,EAAd,CAAX;AACAtB,QAAAA,aAAa,CAACa,GAAG,CAACQ,QAAJ,CAAaE,EAAd,CAAb;AACArB,QAAAA,MAAM,CAACW,GAAG,CAACQ,QAAJ,CAAaG,EAAd,CAAN;AACApB,QAAAA,eAAe,CAACS,GAAG,CAACQ,QAAJ,CAAaI,EAAd,CAAf;AACAnB,QAAAA,aAAa,CAACO,GAAG,CAACQ,QAAJ,CAAaK,EAAd,CAAb;AACA9B,QAAAA,WAAW,CAACiB,GAAG,CAACQ,QAAJ,CAAaM,SAAd,CAAX;AACD,OARD,MAQO;AACLC,QAAAA,KAAK,CAAC,kBAAD,CAAL;AACD;AACF,KAZD;;AAaAf,IAAAA,GAAG,CAACgB,OAAJ,GAAc,MAAM;AAClBD,MAAAA,KAAK,CAAC,gDAAD,CAAL;AACD,KAFD;;AAIAf,IAAAA,GAAG,CAACiB,IAAJ,CACEC,IAAI,CAACC,SAAL,CAAe;AAAEC,MAAAA,QAAQ,EAAEC,IAAI,CAACC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAD;AAAhB,KAAf,CADF;AAGD,GAxBQ,EAwBN,EAxBM,CAAT;;AA0BA,WAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC7BA,IAAAA,KAAK,CAACC,cAAN,GAD6B,CAE7B;;AACA,QAAIC,IAAI,GAAIjC,eAAe,KAAK,EAArB,IACRE,WAAW,KAAK,EADR,IAERE,eAAe,KAAK,EAFvB,CAH6B,CAM7B;;AACA,QAAI8B,KAAK,GAAIhC,WAAW,KAAKE,eAAjB,IACTF,WAAW,KAAKF,eADnB;;AAGA,QAAIiC,IAAJ,EAAU;AACR,UAAIC,KAAJ,EAAW;AACT,YAAI5B,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,QAAAA,GAAG,CAAC6B,gBAAJ,CAAqB,MAArB,EAA6B,MAAM;AACjC,cAAI7B,GAAG,CAAC8B,YAAJ,CAAiBC,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BhB,YAAAA,KAAK,CAAC,6BAAD,CAAL;AACD,WAFD,MAEO;AACLA,YAAAA,KAAK,CAAC,kBAAD,CAAL;AACD;AACF,SAND;AAOAf,QAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiB,6CAAjB,EAAgE,IAAhE;AAEAF,QAAAA,GAAG,CAACiB,IAAJ,CAASC,IAAI,CAACC,SAAL,CAAe;AAAEC,UAAAA,QAAQ,EAAEC,IAAI,CAACC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAD,CAAhB;AAAsDS,UAAAA,QAAQ,EAAEX,IAAI,CAACzB,WAAD,CAApE;AAAmFqC,UAAAA,WAAW,EAAEZ,IAAI,CAAC3B,eAAD;AAApG,SAAf,CAAT;AAED,OAbD,MAaO;AACLqB,QAAAA,KAAK,CAAC,oHAAD,CAAL;AACD;AACF,KAjBD,MAiBO;AACLA,MAAAA,KAAK,CAAC,iCAAD,CAAL;AACD;AACF;;AAGD,QAAMmB,SAAS,GAAG,MAAM;AACtB;AACA;AACA,QAAIlC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiB,6CAAjB,EAAgE,IAAhE;AACAF,IAAAA,GAAG,CAACiB,IAAJ,CACEC,IAAI,CAACC,SAAL,CAAe;AACbC,MAAAA,QAAQ,EAAEC,IAAI,CAACC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAD,CADD;AAEbT,MAAAA,SAAS,EAAElC;AAFE,KAAf,CADF;AAMAG,IAAAA,WAAW,CAACH,GAAD,CAAX;AACAC,IAAAA,MAAM,CAAC,EAAD,CAAN;AACD,GAbD;;AAeA,WAASsD,iBAAT,CAA2BC,IAA3B,EAAiC;AAC/B,QAAIpC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiB,6CAAjB,EAAgE,IAAhE;AAEAF,IAAAA,GAAG,CAACiB,IAAJ,CAASC,IAAI,CAACC,SAAL,CAAe;AAAEC,MAAAA,QAAQ,EAAEC,IAAI,CAACC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAD,CAAhB;AAAuDc,MAAAA,OAAO,EAAED;AAAhE,KAAf,CAAT;AAED;;AAED,QAAME,aAAa,GAAIC,CAAD,IAAO;AAC3BA,IAAAA,CAAC,CAACb,cAAF;;AACA,QAAI1C,QAAQ,IAAIE,UAAZ,IAA0BE,GAA1B,IAAiCE,YAAjC,IAAiDE,UAArD,EAAiE;AAC/D,UAAIgD,KAAK,CAACpD,GAAD,CAAT,EAAgB;AACd2B,QAAAA,KAAK,CAAC,6BAAD,CAAL;AACA;AACD;;AACD,YAAM0B,IAAI,GAAG;AACXrB,QAAAA,QAAQ,EAAEC,IAAI,CAACC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAD,CADH;AAEXd,QAAAA,EAAE,EAAEzB,QAFO;AAGX0B,QAAAA,EAAE,EAAExB,UAHO;AAIXyB,QAAAA,EAAE,EAAEvB,GAJO;AAKXwB,QAAAA,EAAE,EAAEtB,YALO;AAMXuB,QAAAA,EAAE,EAAErB;AANO,OAAb;AAQA,UAAIQ,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,MAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiB,6CAAjB,EAAgE,IAAhE;AACAF,MAAAA,GAAG,CAACiB,IAAJ,CAASC,IAAI,CAACC,SAAL,CAAesB,IAAf,CAAT;AACA1B,MAAAA,KAAK,CAAC,iBAAD,CAAL;AACD,KAjBD,MAiBO;AACLA,MAAAA,KAAK,CAAC,uCAAD,CAAL;AACD;AACF,GAtBD;;AAuBA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEGjC,QAAQ,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFf,EAGGA,QAAQ,iBAAI;AAAI,IAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0BA,QAA1B,CAHf,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,eAKE;AACE,IAAA,WAAW,EAAC,+BADd;AAEE,IAAA,IAAI,EAAC,KAFP;AAGE,IAAA,EAAE,EAAC,KAHL;AAIE,IAAA,KAAK,EAAEF,GAJT;AAKE,IAAA,QAAQ,EAAG2D,CAAD,IAAO1D,MAAM,CAAC0D,CAAC,CAACG,MAAF,CAASC,KAAV,CALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAYE;AAAQ,IAAA,SAAS,EAAC,SAAlB;AAA4B,IAAA,OAAO,EAAET,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAZF,eAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,eAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAhBF,eAiBI;AAAQ,IAAA,SAAS,EAAC,SAAlB;AAA4B,IAAA,OAAO,EAAE,MAAMC,iBAAiB,CAAC,cAAD,CAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAES,OAAO,CAAC,cAAD,CAAjB;AAAmC,IAAA,SAAS,EAAC,WAA7C;AAAyD,IAAA,GAAG,EAAC,QAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAjBJ,eAoBI;AAAQ,IAAA,SAAS,EAAC,SAAlB;AAA4B,IAAA,OAAO,EAAE,MAAMT,iBAAiB,CAAC,qBAAD,CAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAES,OAAO,CAAC,qBAAD,CAAjB;AAA0C,IAAA,SAAS,EAAC,WAApD;AAAgE,IAAA,GAAG,EAAC,QAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CApBJ,eAuBI;AAAQ,IAAA,SAAS,EAAC,SAAlB;AAA4B,IAAA,OAAO,EAAE,MAAMT,iBAAiB,CAAC,YAAD,CAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAES,OAAO,CAAC,YAAD,CAAjB;AAAiC,IAAA,SAAS,EAAC,WAA3C;AAAuD,IAAA,GAAG,EAAC,QAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAvBJ,eA0BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BF,eA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCA3BF,eA4BE;AAAM,IAAA,QAAQ,EAAEN,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAO,IAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,IAAI,EAAC,UAHP;AAIE,IAAA,WAAW,EAAC,aAJd;AAKE,IAAA,KAAK,EAAEtD,QALT;AAME,IAAA,QAAQ,EAAGuD,CAAD,IAAO;AACftD,MAAAA,WAAW,CAACsD,CAAC,CAACG,MAAF,CAASC,KAAV,CAAX;AACD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAaE;AAAO,IAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAbF,eAcE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,IAAI,EAAC,YAHP;AAIE,IAAA,WAAW,EAAC,qCAJd;AAKE,IAAA,KAAK,EAAEzD,UALT;AAME,IAAA,QAAQ,EAAGqD,CAAD,IAAO;AACfpD,MAAAA,aAAa,CAACoD,CAAC,CAACG,MAAF,CAASC,KAAV,CAAb;AACD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdF,eAyBE;AAAO,IAAA,OAAO,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAzBF,eA0BE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,IAAI,EAAC,KAHP;AAIE,IAAA,WAAW,EAAC,WAJd;AAKE,IAAA,KAAK,EAAEvD,GALT;AAME,IAAA,QAAQ,EAAGmD,CAAD,IAAO;AACflD,MAAAA,MAAM,CAACkD,CAAC,CAACG,MAAF,CAASC,KAAV,CAAN;AACD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BF,eAoCE;AAAO,IAAA,OAAO,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCApCF,eAsCE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,IAAI,EAAC,cAHP;AAIE,IAAA,WAAW,EAAC,uBAJd;AAKE,IAAA,KAAK,EAAErD,YALT;AAME,IAAA,QAAQ,EAAGiD,CAAD,IAAO;AACfhD,MAAAA,eAAe,CAACgD,CAAC,CAACG,MAAF,CAASC,KAAV,CAAf;AACD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtCF,eAgDE;AAAO,IAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAhDF,eAiDE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,IAAI,EAAC,YAHP;AAIE,IAAA,WAAW,EAAC,qCAJd;AAKE,IAAA,KAAK,EAAEnD,UALT;AAME,IAAA,QAAQ,EAAG+C,CAAD,IAAO;AACf9C,MAAAA,aAAa,CAAC8C,CAAC,CAACG,MAAF,CAASC,KAAV,CAAb;AACD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjDF,eA2DE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA3DF,CA5BF,eA2FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3FF,eA4FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA5FF,eA6FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,OAAO,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,aAAxB;AAAsC,IAAA,WAAW,EAAC,wBAAlD;AAA2E,IAAA,QAAQ,EAAElB,KAAK,IAAI9B,kBAAkB,CAAC8B,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAAhH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGE;AAAO,IAAA,OAAO,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAII;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,aAAxB;AAAsC,IAAA,WAAW,EAAC,oBAAlD;AAAuE,IAAA,QAAQ,EAAElB,KAAK,IAAI5B,cAAc,CAAC4B,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,eAKE;AAAO,IAAA,OAAO,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAMI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,mBAAxB;AAA4C,IAAA,WAAW,EAAC,sBAAxD;AAA+E,IAAA,QAAQ,EAAElB,KAAK,IAAI1B,kBAAkB,CAAC0B,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAApH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,eAOE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,SAAhC;AAA0C,IAAA,OAAO,EAAElB,KAAK,IAAID,cAAc,CAACC,KAAD,CAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,CA7FF,eAsGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtGF,eAuGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAvGF,eAwGE;AAAQ,IAAA,EAAE,EAAC,WAAX;AAAuB,IAAA,SAAS,EAAC,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAxGF,eA2GE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3GF,CADF;AA+GD,CApOD;;AAsOA,eAAe9C,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./EditProfile.css\";\r\n\r\nconst EditProfile = () => {\r\n  const [bio, setBio] = useState(\"\");\r\n  const [finalBio, setFinalBio] = useState(\"\");\r\n  const [favSport, setFavSport] = useState(\"\");\r\n  const [sportLevel, setSportLevel] = useState(\"\");\r\n  const [age, setAge] = useState(\"\");\r\n  const [favSportTeam, setFavSportTeam] = useState(\"\");\r\n  const [learnSport, setLearnSport] = useState(\"\");\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open(\"POST\", \"http://localhost:8080/api/v1/getUserInfo\");\r\n    xhr.responseType = \"json\";\r\n    xhr.onload = () => {\r\n      if (xhr.status < 400) {\r\n        console.log(xhr.response);\r\n        setFavSport(xhr.response.Q1);\r\n        setSportLevel(xhr.response.Q2);\r\n        setAge(xhr.response.Q3);\r\n        setFavSportTeam(xhr.response.Q4);\r\n        setLearnSport(xhr.response.Q5);\r\n        setFinalBio(xhr.response.biography);\r\n      } else {\r\n        alert(\"400 Error Status\");\r\n      }\r\n    };\r\n    xhr.onerror = () => {\r\n      alert(\"Can't connect to server! Something went wrong!\");\r\n    };\r\n\r\n    xhr.send(\r\n      JSON.stringify({ username: btoa(sessionStorage.getItem(\"username\")) })\r\n    );\r\n  }, []);\r\n  \r\n  function handlePassword(event) {\r\n    event.preventDefault();\r\n    // check that all fields were filled\r\n    var fill = (currentPassword !== \"\") &&\r\n      (newPassword !== \"\") &&\r\n      (confirmPassword !== \"\")\r\n    // check password validity\r\n    var valid = (newPassword === confirmPassword) &&\r\n      (newPassword !== currentPassword) \r\n    \r\n    if (fill) {\r\n      if (valid) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.addEventListener('load', () => {\r\n          if (xhr.responseText.length > 0) {\r\n            alert('Current password is invalid')\r\n          } else {\r\n            alert('Password changed')\r\n          }\r\n        })\r\n        xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\r\n\r\n        xhr.send(JSON.stringify({ username: btoa(sessionStorage.getItem('username')), password: btoa(newPassword), oldPassword: btoa(currentPassword)}));\r\n\r\n      } else {\r\n        alert('Check that:\\n1. Your current password does not match your new password\\n2. Both fields for your new password match')\r\n      }\r\n    } else {\r\n      alert('Please fill out all the fields.')\r\n    }\r\n  }\r\n\r\n\r\n  const updateBio = () => {\r\n    // instance.post(\"/updateUserProfile\", { biography: bio });\r\n    // setBio(\"\");\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\r\n    xhr.send(\r\n      JSON.stringify({\r\n        username: btoa(sessionStorage.getItem(\"username\")),\r\n        biography: bio,\r\n      })\r\n    );\r\n    setFinalBio(bio);\r\n    setBio(\"\");\r\n  };\r\n\r\n  function setProfilePicture(path) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\r\n\r\n    xhr.send(JSON.stringify({ username: btoa(sessionStorage.getItem('username')),  picture: path}));\r\n\r\n  }\r\n\r\n  const submitAnswers = (e) => {\r\n    e.preventDefault();\r\n    if (favSport && sportLevel && age && favSportTeam && learnSport) {\r\n      if (isNaN(age)) {\r\n        alert(\"Age has to be valid number!\");\r\n        return;\r\n      }\r\n      const data = {\r\n        username: btoa(sessionStorage.getItem(\"username\")),\r\n        Q1: favSport,\r\n        Q2: sportLevel,\r\n        Q3: age,\r\n        Q4: favSportTeam,\r\n        Q5: learnSport,\r\n      };\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.open(\"POST\", \"http://localhost:8080/api/v1/updateUserData\", true);\r\n      xhr.send(JSON.stringify(data));\r\n      alert(\"Answers updated\");\r\n    } else {\r\n      alert(\"Please finish the whole survey again!\");\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"centContainer\">\r\n      <h5>MY SPORTCRED ACCOUNT</h5>\r\n      {finalBio && <h3>My Biography</h3>}\r\n      {finalBio && <h3 className=\"user-bio\">{finalBio}</h3>}\r\n      <h3>Update Biography</h3>\r\n      <textarea\r\n        placeholder=\" Enter something about you...\"\r\n        name=\"bio\"\r\n        id=\"bio\"\r\n        value={bio}\r\n        onChange={(e) => setBio(e.target.value)}\r\n      />\r\n      <button className=\"button1\" onClick={updateBio}>\r\n        Update\r\n      </button>\r\n      <br />\r\n      <h3>update profile picture</h3>\r\n        <button className=\"button1\" onClick={() => setProfilePicture(\"./lebron.jpg\")}>\r\n          <img src={require('./lebron.jpg')} className=\"avatarPic\" alt=\"avatar\"/>\r\n        </button>\r\n        <button className=\"button1\" onClick={() => setProfilePicture(\"./michaeljordan.jpg\")}>\r\n          <img src={require('./michaeljordan.jpg')} className=\"avatarPic\" alt=\"avatar\"/>\r\n        </button>\r\n        <button className=\"button1\" onClick={() => setProfilePicture(\"./kobe.jpg\")}>\r\n          <img src={require('./kobe.jpg')} className=\"avatarPic\" alt=\"avatar\"/>\r\n        </button>\r\n      <br />\r\n      <h3>update questionnaire answers</h3>\r\n      <form onSubmit={submitAnswers}>\r\n\r\n        <label htmlFor=\"favSport\">Favourite sport?</label>\r\n        <input\r\n          className=\"survey-input\"\r\n          type=\"text\"\r\n          name=\"favSport\"\r\n          placeholder=\"Enter sport\"\r\n          value={favSport}\r\n          onChange={(e) => {\r\n            setFavSport(e.target.value);\r\n          }}\r\n        />\r\n        <label htmlFor=\"sportLevel\">Highest level of sport played?</label>\r\n        <input\r\n          className=\"survey-input\"\r\n          type=\"text\"\r\n          name=\"sportLevel\"\r\n          placeholder=\"Enter highest level of sport played\"\r\n          value={sportLevel}\r\n          onChange={(e) => {\r\n            setSportLevel(e.target.value);\r\n          }}\r\n\r\n        />\r\n        <label htmlFor=\"age\">Age?</label>\r\n        <input\r\n          className=\"survey-input\"\r\n          type=\"text\"\r\n          name=\"age\"\r\n          placeholder=\"Enter age\"\r\n          value={age}\r\n          onChange={(e) => {\r\n            setAge(e.target.value);\r\n          }}\r\n        />\r\n        <label htmlFor=\"favSportTeam\">Team you are rooting for?</label>\r\n\r\n        <input\r\n          className=\"survey-input\"\r\n          type=\"text\"\r\n          name=\"favSportTeam\"\r\n          placeholder=\"Enter favourite sport\"\r\n          value={favSportTeam}\r\n          onChange={(e) => {\r\n            setFavSportTeam(e.target.value);\r\n          }}\r\n        />\r\n        <label htmlFor=\"learnSport\">Sport you want to learn?</label>\r\n        <input\r\n          className=\"survey-input\"\r\n          type=\"text\"\r\n          name=\"learnSport\"\r\n          placeholder=\"Enter sport you want to learn about\"\r\n          value={learnSport}\r\n          onChange={(e) => {\r\n            setLearnSport(e.target.value);\r\n          }}\r\n        />\r\n        <button type=\"submit\" className=\"button1\">\r\n          Update\r\n        </button>\r\n      </form>\r\n      <br />\r\n      <h3>Update password</h3>\r\n      <form>\r\n        <label htmlFor=\"oldPassword\"></label>\r\n          <input type=\"text\" name=\"oldPassword\" placeholder=\"Enter current password\" onChange={event => setCurrentPassword(event.target.value)}/>\r\n        <label htmlFor=\"newPassword\"></label>\r\n          <input type=\"text\" name=\"newPassword\" placeholder=\"Enter new password\" onChange={event => setNewPassword(event.target.value)}/>\r\n        <label htmlFor=\"confirmedPassword\"></label>\r\n          <input type=\"text\" name=\"confirmedPassword\" placeholder=\"Confirm new password\" onChange={event => setConfirmPassword(event.target.value)}/> \r\n        <button type=\"submit\" className=\"button1\" onClick={event => handlePassword(event)}>Update</button>\r\n      </form>\r\n      <br />\r\n      <hr />\r\n      <button id=\"logOutBtn\" className=\"button1\">\r\n        LOG OUT\r\n      </button>\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n"]},"metadata":{},"sourceType":"module"}